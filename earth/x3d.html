<html>
<head>
    <title>üåé X</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' type='text/css' href='css/x3dom.css'>
    <script type='text/javascript' src='js/x3dom.js'> </script>
    <style>
        x3d
        {
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
        }

        body
        {
            /*margin: 0px;*/
        }
        #area-panel{
            position: absolute;
            display: flex;
            justify-content: space-around;  
            flex-direction: column;
            width: 150px;
            height: 200px;
            color: #fff;
            top: 10px;
            left: 10px;
            z-index: 1;
        }
        #bar {
            position: absolute;
            z-index: 1;
            left: 12.5%;
            bottom: 7%;
            width: 75%;
        }
        input[type=range] {
            background: none;
            outline: none;
        }
        
        #dash-menu {
            position: absolute;
            z-index: 1;
            right: 5%;
            top: 5%;

        }
        .dash{
            margin: 2px;

            width: 22px;
            height: 2px;
            border-radius: 1px;
            border: 1px solid #aaa;
            background-color: #eee;
        }
        .dashes {
            background-color: #555;
            width: 27px;
            height: 22px;
            padding: 12px;
        }
        .viz-list {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            overflow: hidden;

            width: 100%;
            height: 0px;
            transition: height .1s;
        }
        .viz-item {
            width: 45px;
            height: 45px;
            border: 1px solid #eee;
            border-radius: 23px;
            font-size: 45px;
        }
    </style>
</head>
<body>
<input type="range" name="" id="bar" min=0 max=180 step=1 oninput="setBar(this);">
<div id="dash-menu">
    <div class="dashes">
        <div class="dash"></div>
        <div class="dash"></div>
        <div class="dash"></div>
    </div>
    <div class="viz-list">
        <div class="viz-item">üåÄ</div>
        <div class="viz-item">‚òÇÔ∏è</div>
        <div class="viz-item">üíß</div>
    </div>    
</div>
<div id="area-panel">
    <span onclick="views.eastaisa.setAttribute('set_bind','true');">East Aisa</span>
    <span onclick="views.northamerica.setAttribute('set_bind','true');">North America</span>
    <span onclick="views.southamerica.setAttribute('set_bind','true');">South America</span>
    <span onclick="views.europe.setAttribute('set_bind','true');">Europe</span>
    <span onclick="views.africa.setAttribute('set_bind','true');">Africa</span>
    <span onclick="views.australia.setAttribute('set_bind','true');">Australia</span>
</div>
<x3d>
    <scene>
        <navigationInfo type='turntable'></navigationInfo>
        <ViewPoint position="0 0 6"></ViewPoint>
        <Viewpoint id="eastaisa" position="4.59665 2.71870 -2.73485" orientation="-0.13133 0.96406 0.23095 2.13866" zNear="0.00113" zFar="11.26984"></Viewpoint>
        <Viewpoint id="northamerica" position="-4.86314 3.42450 -0.78914" orientation="-0.24659 -0.92477 -0.28983 1.80831" zNear="2.02872" zFar="11.35692"></Viewpoint>
        <Viewpoint id="southamerica" position="-5.12755 -1.58758 2.68100" orientation="0.21527 -0.96781 0.13036 1.11824" zNear="0.00111" zFar="11.11080"></Viewpoint>
        <Viewpoint id="europe" position="0.96189 4.60605 3.72278" orientation="-0.95784 0.26022 0.12175 0.90872" zNear="2.02872" zFar="11.35692"></Viewpoint>
        <Viewpoint id="africa" position="1.93405 0.50884 5.65690" orientation="-0.24739 0.96804 0.04112 0.34010" zNear="2.02872" zFar="11.35692"></Viewpoint>
        <Viewpoint id="australia" position="3.77336 -2.92617 -3.63308" orientation="0.10657 0.96222 -0.25054 2.36463" zNear="2.02872" zFar="11.35692"></Viewpoint>
        <transform>
            <transform>
                <shape>
                    <sphere radius="2" subdivision="96,96"></sphere>
                    <appearance>
                        <ImageTexture url="textures/earthmap1k.jpg"></ImageTexture>
                    </appearance>
                </shape>
            </transform>
            
            <transform>
                <shape>
                    <sphere radius="2" subdivision="96,96"></sphere>
                    <appearance>
                        <ImageTexture id="layer1" url="_scale.png">
                                <TextureProperties minificationFilter='NEAREST' magnificationFilter='NEAREST'></TextureProperties>
                        </ImageTexture>
                    </appearance>
                </shape>
            </transform>
        </transform>

    </scene>
</x3d>
<script>
    var views = {}, layers = {};
    document.onload = function() {
        views.africa = document.getElementById('africa');
        views.eastaisa = document.getElementById('eastaisa');
        views.northamerica = document.getElementById('northamerica');
        views.southamerica = document.getElementById('southamerica');
        views.europe = document.getElementById('europe');
        views.australia = document.getElementById('australia');

        layers.layer1 = document.getElementById('layer1');

        var viz_list = document.querySelector('.viz-list'), vl_state = false;
        document.getElementById('dash-menu').onclick = function() {
            vl_state = !vl_state;
            viz_list.style.height = vl_state? '40vh': '0px';
        }
    }
    function setBar(range) {
        layers.layer1.setAttribute("url", `temp2/${range.value}.png`);
    }
</script>
</body>
</html> 
